{"version":3,"file":"index.js","sources":["../src/lib/ReadMoreText.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react'\nimport './index.css'\n\n\ninterface IProps {\n    text: string\n    type?: 'plainText' | 'html'\n    readMoreText?: string\n    readLessText?: string\n    containerHeight?: string\n    onAction?: () => void\n    lines?: number\n}\n\n\nconst ReadMoreText: React.FC<IProps> = (props) => {\n    const [isOverflowing, setIsOverflowing] = useState(false)\n    const [expanded, setExpanded] = useState(false)\n\n\n    const containerRef = useRef<HTMLDivElement>(null);\n\n\n    useEffect(() => {\n        const el = containerRef.current;\n        if (!el) return;\n\n        if (el.scrollHeight > el.clientHeight) {\n            setIsOverflowing(true);\n        }\n\n    }, [])\n\n\n    const toggleExpand = () => {\n        setExpanded(!expanded)\n    }\n\n    const formatText = (text: string) => text.replace(/(?:\\r\\n|\\r|\\n)/g, '<br />');\n\n    const {\n        type = 'plainText',\n        text = '',\n        readMoreText = 'More',\n        readLessText = 'Less',\n        lines = 3,\n        onAction = toggleExpand\n    } = props\n\n    const _html = formatText(text);\n\n    const classNames = ' rm-typography ' + (expanded ? '' : ' rm-text-container ') + (isOverflowing ? ' rm-overflow-hidden ' : '')\n\n    return (\n        <div className=\"rm-container\">\n            <div ref={containerRef} className=\"rm-text-wrapper\">\n                {\n                    type === 'html' ?\n                        <p className={classNames} style={{\n                            lineClamp: lines,\n                            WebkitLineClamp: lines,\n                        }} dangerouslySetInnerHTML={{ __html: _html }} />\n                        :\n                        <p className={classNames} style={{\n                            lineClamp: lines,\n                            WebkitLineClamp: lines,\n                        }}>\n                            {text}\n                        </p>\n                }\n\n            </div>\n            {\n                isOverflowing ?\n                    (\n                        <div className=\"rm-action-button-container\">\n                            {\n                                !expanded ?\n                                    <button className=\"rm-more-button\" onClick={onAction} >{readMoreText}</button> :\n                                    <button className=\"rm-less-button\" onClick={toggleExpand}>{readLessText}</button>\n                            }\n                        </div>\n                    )\n                    : null\n            }\n        </div>\n    )\n\n}\n\n\nexport default (ReadMoreText)"],"names":["useRef","useEffect","React"],"mappings":";;;;;;;;;AAeA,IAAM,YAAY,GAAqB,UAAC,KAAK;IACnC,IAAA,0BAAmD,EAAlD,qBAAa,EAAE,wBAAmC,CAAA;IACnD,IAAA,0BAAyC,EAAxC,gBAAQ,EAAE,mBAA8B,CAAA;IAG/C,IAAM,YAAY,GAAGA,YAAM,CAAiB,IAAI,CAAC,CAAC;IAGlDC,eAAS,CAAC;QACN,IAAM,EAAE,GAAG,YAAY,CAAC,OAAO,CAAC;QAChC,IAAI,CAAC,EAAE;YAAE,OAAO;QAEhB,IAAI,EAAE,CAAC,YAAY,GAAG,EAAE,CAAC,YAAY,EAAE;YACnC,gBAAgB,CAAC,IAAI,CAAC,CAAC;SAC1B;KAEJ,EAAE,EAAE,CAAC,CAAA;IAGN,IAAM,YAAY,GAAG;QACjB,WAAW,CAAC,CAAC,QAAQ,CAAC,CAAA;KACzB,CAAA;IAED,IAAM,UAAU,GAAG,UAAC,IAAY,IAAK,OAAA,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAE,QAAQ,CAAC,GAAA,CAAC;IAG3E,IAAA,eAAkB,EAAlB,uCAAkB,EAClB,eAAS,EAAT,8BAAS,EACT,uBAAqB,EAArB,0CAAqB,EACrB,uBAAqB,EAArB,0CAAqB,EACrB,gBAAS,EAAT,8BAAS,EACT,mBAAuB,EAAvB,4CAAuB,CAClB;IAET,IAAM,KAAK,GAAG,UAAU,CAAC,IAAI,CAAC,CAAC;IAE/B,IAAM,UAAU,GAAG,iBAAiB,IAAI,QAAQ,GAAG,EAAE,GAAG,qBAAqB,CAAC,IAAI,aAAa,GAAG,sBAAsB,GAAG,EAAE,CAAC,CAAA;IAE9H,QACIC,sCAAK,SAAS,EAAC,cAAc;QACzBA,sCAAK,GAAG,EAAE,YAAY,EAAE,SAAS,EAAC,iBAAiB,IAE3C,IAAI,KAAK,MAAM;YACXA,oCAAG,SAAS,EAAE,UAAU,EAAE,KAAK,EAAE;oBAC7B,SAAS,EAAE,KAAK;oBAChB,eAAe,EAAE,KAAK;iBACzB,EAAE,uBAAuB,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE,GAAI;;gBAEjDA,oCAAG,SAAS,EAAE,UAAU,EAAE,KAAK,EAAE;wBAC7B,SAAS,EAAE,KAAK;wBAChB,eAAe,EAAE,KAAK;qBACzB,IACI,IAAI,CACL,CAGV;QAEF,aAAa;aAELA,sCAAK,SAAS,EAAC,4BAA4B,IAEnC,CAAC,QAAQ;gBACLA,yCAAQ,SAAS,EAAC,gBAAgB,EAAC,OAAO,EAAE,QAAQ,IAAI,YAAY,CAAU;gBAC9EA,yCAAQ,SAAS,EAAC,gBAAgB,EAAC,OAAO,EAAE,YAAY,IAAG,YAAY,CAAU,CAEvF;cAER,IAAI,CAEZ,EACT;CAEJ,CAAA;;;;"}